<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/v4-shims.css">
    <script defer src="https://use.fontawesome.com/releases/v5.15.2/js/all.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.15.2/js/v4-shims.js"></script>

    <!-- Lordicons -->
    <script src="https://cdn.lordicon.com/lusqsztk.js"></script>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- CSS -->
    <link rel="stylesheet" href="/static/stylesheet.css">

    <title>Lastfm - Scrobbler Widget</title>
</head>
<body>

    <div class="card-div">
        <p class="heading">
            <i class="fab fa-lastfm-square fa-lg icon"></i> &nbsp; Lastfm - Scrobbler Widget <span id="uname"><a href="https://www.last.fm/user/{{ uname }}" target="_blank">@{{ uname }}</a></span>
        </p>
        <hr>
        <p class="scrobble-count"><small>{{ total_scrobble_count }} scrobbles</small></p>
        {%for info in user_data_list %}
            <div class="song-metadata album-art">
                {% if  info.album_image == "" %}
                    <img src="https://lastfm.freetls.fastly.net/i/u/34s/4128a6eb29f94943c9d206c08e625904.jpg">
                {% else %}
                    <img src="{{ info.album_image }}"/>
                {% endif %}
            </div>
            <div class="song-metadata song-detail">
                {% if info.loved %}
                    <p class="song-name">{{ info.song_name }} <br> <small>{{ info.artist_name }}</small>
                        <small style="float:right;">
                            {% if info.now_playing %}
                            <lord-icon
                                src="https://cdn.lordicon.com/xulniijg.json"
                                trigger="loop"
                                colors="primary:#ffffff"
                                style="width:20px;height:20px">
                            </lord-icon>
                            {% endif %}
                            <i class="fa fa-solid fa-heart icon"></i> &nbsp;&nbsp; {{ info.play_time }}
                        </small>
                    </p>
                {% else %}
                    <p class="song-name">{{ info.song_name }} <br> <small>{{ info.artist_name }}</small>
                        <small style="float:right;">
                            {% if info.now_playing %}
                            <lord-icon
                                src="https://cdn.lordicon.com/xulniijg.json"
                                trigger="loop"
                                colors="primary:#ffffff"
                                style="width:20px;height:20px">
                            </lord-icon>
                            {% endif %}
                            {{ info.play_time }}
                        </small>
                    </p>
                {% endif %}
            </div>
        {%endfor%}
    </div>
</body>
</html>